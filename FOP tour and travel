#include <iostream>
#include<string.h>
#include<stdlib.h>
#include<conio.h>
#include<windows.h>
#include<iomanip>
#define ENTER 13
#define TAB 9
#define BKSP 8
#define SPACE 32
using namespace std;
struct calTOT
{
	float distance;
	float hotel_usage;
	float tourCost;
	float tranCOST;
}tourTOT[20];
struct allData
{
    char reccomend1[20];
	char reccomend2[20];
	char reccomend3[20];;
	char reccomend4[20];;
	char reccomend5[20];;
	char avail1[20];
	char avail2[20];
	char avail3[20];;
};
struct date
{
		int depDay;
		int depmm;
		int depyy;
		int retday;
		int retmm;
		int retyy;
}date1;
struct payPal
{
	string name;
	string address;
	string email;
	string password;

}PAYPAL[20];
struct bahiTEchres
{
             		string name;
             		string email;
             		int age;
             		char sex;
             		string Tranum;
             		int numOFroom;
             		int num_of_gro;
             		string typeOfroom;
             		date date1;
}bahir[20];
	//this variable is used to recieve the returned value
	int retval;
	char enter;
	//used to check availability of tour
int checkAvail(allData);
// used to enter to the detail
void adminlogin();
void userlogin();
void adminOUT();
void adminsearch();
void switchCheck();
void bahirDarFun();
void reccom();
void sortData();
void gondINFO();
void gondarFun();
void axumFun();
void laliFun();
void addPlace();
void semienFun();
void BahiINFO();
void newPlace();
void groupENTR();
void  ticketRESofB();
float  ticketcostB(calTOT);
void  ticketCANB();
void yourEntry();
void  update();
void loadingBar();
 void paymentFUN();
allData givenData={"Bahir Dar","Gondar","Axum","Lalibela","Semein mountain","Axum","Lalibela","Bahir Dar"};
int main ()
{
    	cout<<"\n                        =========================================";
    	cout<<"\n         =============== WELLCOME TO AASTU TOUR AND TRAVEL AGENCY =================";
    	cout<<"\n                        ==========================================\n";
    cout<<"1. Admin\n";
    cout<<"2. User\n";
    cout<<"E. Exit\n";
    cout<<"press : ";
    enter = getche();
    cout<<endl;
     system("pause");
     system("color 07");
    switch(enter)
    {
    case '1':
        system("CLS");
        adminlogin();
        break;
    case '2':
        system("CLS");
        userlogin();
        break;
    case 'e':
        system("CLS");
        exit(1);
        break;
    case 'E':
        system("CLS");
        exit(1);
        break;
    }
    return 0;
}


void adminlogin()
{
    int i = 0;
    char password[10], defpass[] = {"1234"};
    char admin[10], defAD[] = {"sectionB"};
again:
    cout<<"\n\n\n";
    cout<<"              ||########  wellcome to my admin ######### ||\n";
    cout<<"Admin username : ";
    cin>>admin;
    printf("password : ");
    for(int i=0;i<9;i++)
    {
        enter= getch();
        if(enter==ENTER)
        {
            password[i] = '\0';
            break;
        }
        else if(enter== BKSP)
        {
            if(i > 0)
            {
                i--;
                cout<<"\b \b";
            }
        }

        else if(enter== TAB || enter== SPACE)
        {
            continue;
        }

        else
        {
            password[i]=enter;
    	      cout<<"*";
        }

    }
    if(strcmp(defAD, admin)==0 && strcmp(defpass, password)==0)
    {
        cout<<"\nSuccessfully Log in\n";
        system("pause");
        system("CLS");
        adminOUT();
    }
    else
    {
    	   system("color 04");
        cout<<"\nWrong try again !\n";
        system("color 07\n");
        system("\npause");
        system("CLS");
        goto again;
    }
}
void userlogin()
{
     returned :
     cout<<endl<<endl;
     cout<<"          ================ AASTU tour and travel agency gives these tour services ============\n";
     cout<<endl;
     cout<<"           1. Reccomended tours : \n";
     cout<<"           2. Festival tours : \n";
     cout<<"           3. Tour packeges  : \n";
     cout<<"           4. others : \n";
     cout<<"           #  Exit : \n";
     //to  enter the above choices use this variable
     cout<<"\n==== press : ";
      enter=getche();cout<<endl;
     system("pause");
     system("cls");
     loadingBar();
     system("cls");
     system("color 07");
     switch(enter)
            {
                case '1':
            entAGAIN:      cout<<"\n  ======== Reccomended tours are : \n";
                	         cout<<"1. Bahir Dar\n";
                           cout<<"2. Gondar\n";
                           cout<<"3. Axum\n";
                           cout<<"4. Lalibela\n";
                           cout<<"5. Semein mauntain\n";
                           cout<<"# back\n";
                           cout<<"$ Exit\n";
                      cout<<"to check there availability press: ";
                                retval=checkAvail(givenData);
                        if (retval==1)
                               {
                               	 cout<<"\n1.back\n";
                                     cout<<"2.to continue press there number\n";
                      retry:   enter=getche();
                                switch(enter)
                                       {
                                       	case '1':
                                       	         goto entAGAIN;
                                       	         system("cls");
                                       	         break;
                                          case '2':
                                                   switchCheck();
                                       	         break;
                                          default :
                                          	 cout<<"wrong entry try again!!\n";
                                                 goto retry;
						   }
					 }
                        else if(retval==0)
		                {

				cout<<"\nif you want to back to main page press 1 to exit press 0\n";
					//to exit or continue use this variables
					 retry1:   enter=getche();
                                switch(enter)
                                       {
                                       	case '1':
                                       	         goto returned;
                                       	         system("cls");
                                       	         break;
                                          case '0':
                                          	   exit(0);
                                       	         break;
                                          default :
                                          	 cout<<"wrong entry try again!!\n";
                                                 goto retry1;
						   }
					}
					break;
			  case '2':
			  	cout<<"festival";
			  	break;
			  case '3':
			  	cout<<"package";
			  	break;
			  case '4':
			  	cout<<"others";
			  	 break;
			  case '#':
			  	exit(0);
			  	break;
			  default :
			         {
			         	 system("color 04");
			             cout<<"wrong entry\n";
			             cout<<"try again\n";
				       system("color 07");
				       goto entAGAIN;
				        break;
				   }
                   }
		    }
  int checkAvail(allData passedD)
            {
                    back:   enter = getche();
                                loadingBar();
                                 system("cls");
                                 system("color 07");
	            int returnVAL;
	                switch(enter)
                                      {
               	      case '1':
               		{
               		      if (strcmp(passedD.reccomend1,passedD.avail1)==0)
               		            {
						      cout<<"Availaible";
							returnVAL= 1;
                                    }
                              else if(strcmp(passedD.reccomend1,passedD.avail2)==0)
     		                        {
						cout<<"Availaible";
						returnVAL= 1;
                                    }
     		                  else if(strcmp(passedD.reccomend1,passedD.avail3)==0)
     		                        {
						cout<<"Availaible";
						returnVAL= 1;
                                    }
     		                  else
     		                        {
						cout<<"Not Availaible";
				            returnVAL= 0;
						}
     		                        return returnVAL;
     		                        break;
					      }
	            	case '2':
               		{

               		     if (strcmp(passedD.reccomend2,passedD.avail1)==0)
               		            {
                                          returnVAL= 1;
							cout<<"Availaible";
                                    }
     		                 else if(strcmp(passedD.reccomend2,passedD.avail2)==0)
     		                        {
							returnVAL= 1;
						      cout<<"Availaible";
                                    }
     		                 else if(strcmp(passedD.reccomend2,passedD.avail3)==0)
     		                        {
							returnVAL= 1;
							cout<<"Availaible";
                                    }
     		                 else
     		                        {
     		                              returnVAL= 0;
							cout<<"Not Availaible";
						}

     		                              return returnVAL;
     		                              break;
				}
                       case '3':
               		{

               		     if (strcmp(passedD.reccomend3,passedD.avail1)==0)
               		            {
						   returnVAL= 1;
						   cout<<"Availaible";
                                    }
     		                 else if(strcmp(passedD.reccomend3,passedD.avail2)==0)
     		                        {
						   returnVAL= 1;
						   cout<<"Availaible";
                                    }
     		                 else if(strcmp(passedD.reccomend3,passedD.avail3)==0)
     		                        {
						   returnVAL= 1;
						   cout<<"Availaible";
                                    }
     		                 else
     		                        {
     		                           returnVAL= 0;
						   cout<<"Not Availaible";
						}
     		                           return returnVAL;
     		                           break;
				}
				case '4':
               		{

               		     if (strcmp(passedD.reccomend4,passedD.avail1)==0)
                                    {
						  returnVAL= 1;
						  cout<<"Availaible";
                                    }
     		                 else if(strcmp(passedD.reccomend4,passedD.avail2)==0)
     		                        {
						  returnVAL= 1;
						  cout<<"Availaible";
                                    }
     		                 else if(strcmp(passedD.reccomend4,passedD.avail3)==0)
     		                        {
						  returnVAL= 1;
						  cout<<"Availaible";
                                    }
     		                 else
     		                        {
						  returnVAL= 0;
						  cout<<"Not Availaible";
                                    }

     		                          return returnVAL;
     		                          break;
				}
				case '5':
               		{

               		    if (strcmp(passedD.reccomend5,passedD.avail1)==0)
               		            {
			                    returnVAL= 1;
						  cout<<"Availaible";
                                    }
     		                else if(strcmp(passedD.reccomend5,passedD.avail2)==0)
     		                         {
     		                            returnVAL= 1;
						    cout<<"Availaible";
     		                         }
     		                else if(strcmp(passedD.reccomend5,passedD.avail3)==0)
     		                         {
						    returnVAL= 1;
						    cout<<"Availaible";
                                     }
     		                else
     		                         {
						    returnVAL= 0;
						    cout<<"Not Availaible";
                                     }

     		                            return returnVAL;
     		                            break;
		            }
		            case '#':
		                  userlogin();
		                  break;
                        case '$':
                     	       exit(0);
                     	       break;
                	       default :
                	       	  system("color 04");
                	       	  cout<<"you entered wrong number ";
                	       	  system("color 07");
                	       	  cout<<"please enter again";
                	       	  goto back;
                	       	  break;
			}
            }
